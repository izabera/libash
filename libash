#!/usr/bin/env bash

[[ -d /tmp/libash ]] && mkdir -p /tmp/libash

# reset sane defaults
PS1='\u@\h \w \$ '
PS2='> '
PS3='> '
PS4='+ '
PROMPT_COMMAND=


# case insensitive matching and completion
# LIBASH_CASE=no

# don't source it again
if [[ ! ${!BASH_COMPLETION*} ]]; then
  BASH_COMPLETION_locations=(
    # a few possible places, add more if needed
    /usr/share/bash-completion/bash_completion
    /etc/bash_completion
  )
  for BASH_COMPLETION_location in "${BASH_COMPLETION_locations[@]}"; do
    if [[ -r $BASH_COMPLETION_location ]]; then
      . "$BASH_COMPLETION_location"
      break
    fi
  done
  unset BASH_COMPLETION_location{,s}
fi


export LIBASHDIR=${LIBASHDIR=$BASH_SOURCE}

sourcelibash () {
  local file array
  shopt -s extglob globstar
  # keep. the. order.
  LC_COLLATE=C eval 'array=("$LIBASHDIR/scripts/"!(*alias|*notready*))'
  for file in "${array[@]}"; do
    source "$file"
  done

  if [[ $- = *i* ]]; then
    for file in "$LIBASHDIR"/scripts/*alias; do
      source "$file"
    done
  fi
}
sourcelibash

# much betta
TIMEFORMAT=$'\nreal: %lR, user: %lU, sys: %lS'


[[ -r ~/.config/libash ]] && source ~/.config/libash
