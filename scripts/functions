#!/usr/bin/env bash

# usage: mkdirc a/b/c/d/e/f

mkdirc () {
  if [[ -z $1 || -n $2 ]]; then
    echo "Usage: $0 directory"
    return 1
  else
    mkdir -p "$1" && cd "$1"
  fi
}

# go up and destroy temp directories

uprm () {
  temp=${PWD##*/}
  [[ $temp ]] && cd .. && rm -rf "$temp" # don't delete /
}

# backup your files easily to /backup with a timestamp
# the /backup directory must exist and be writable

backup () {
  local sha
  for file ; do
    read sha _ <<< $(printf %s "$file" | sha1sum)
    cp "$file" "/backup/$(date +%Y-%m-%d-%H-%M-%S)-$sha-${file##*/}"
  done
}

# returns 0 if empty and 1 if not
# if no parameter is specified, uses PWD

isempty () (
  shopt -s dotglob nullglob
  [[ -z $1 ]] && set -- "$PWD"
  files=("$1/"*)
  (( ${#files[@]} > 0 )) && return 1
  return 0
)
